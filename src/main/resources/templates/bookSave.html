<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>책 등록</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
<h1>책 등록</h1>
<form id="bookForm">
  <label for="name">책명칭 : </label>
  <input id="name" name="name" type="text">
  <label for="price">책가격</label>
  <input id="price" name="price" type="number">
  <label for="description">책 설명 : </label>
  <textarea cols="30" id="description" name="description" rows="10"></textarea>
  <label for="stock">수량 : </label>
  <input id="stock" name="stock" type="number">
  <button id="saveProductButton" type="button">책 저장</button>
</form>

<script>
  $('#saveBookButton').click(function (e) {
    e.preventDefault();
    let name = $('#name').val();
    let price = $('#price').val();
    let description = $('#description').val();
    let stock = $('#stock').val();

    if(!name || !price || !description || !stock){
      alert("모든필드 입력하기");
      return;
    }


    $.ajax({
      url: '/api/bookSave',
      method: 'POST',
      contentType: "application/json", //자바 추천형식으로 사용 OK 'application/x-www-form-urlencoded;charset=UTF-8'
      data:
      // 배열형태로 한  컬럼에 여러 값을 저장 {JSON: JSON.stringify(JSON.parse(JSON.stringify(productList)))},}
      // 배열형태로 여러컬럼에 한 번에 저장
              JSON.stringify({ name: name,
                price: price,
                description: description,
                stock: stock
              })
      ,
      success: function (data) {
        alert("제품이 무사히 등록되었습니다.");

        // ajax 기능을 한 번더 이용해서 제품 불러오기
        getBookList(); //제품 등록 되었을 때 제품 모두 보기 기능 사용
        $("#name").val('');
        $("#price").val('');
        $("#description").val('');
        $("#stock").val('');
      },
      error: function () {
        alert("제품 등록에 실패하였습니다.");
      }
    })
  })
</script>




</body>
</html>